<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kubernetes YAML Builder</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #0f172a;
      color: #e5e7eb;
    }
    header {
      padding: 1.5rem 2rem;
      background: #020617;
      border-bottom: 1px solid #1f2937;
    }
    header h1 {
      margin: 0;
      font-size: 1.4rem;
    }
    header p {
      margin: 0.25rem 0 0;
      font-size: 0.9rem;
      color: #9ca3af;
    }
    main {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.5fr);
      gap: 1.5rem;
      padding: 1.5rem 2rem 2rem;
    }
    @media (max-width: 900px) {
      main {
        grid-template-columns: 1fr;
      }
    }
    .card {
      background: #020617;
      border-radius: 0.75rem;
      border: 1px solid #1f2937;
      padding: 1.25rem 1.5rem;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.8);
    }
    .card h2 {
      margin: 0 0 0.75rem;
      font-size: 1.1rem;
    }
    .card p {
      margin: 0 0 1rem;
      font-size: 0.85rem;
      color: #9ca3af;
    }
    .section-title {
      margin-top: 1.25rem;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #6b7280;
    }
    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.75rem 1rem;
    }
    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.75rem 1rem;
    }
    .field {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      margin-bottom: 0.75rem;
    }
    .field label {
      font-size: 0.8rem;
      color: #9ca3af;
    }
    .field input,
    .field select,
    .field textarea {
      background: #020617;
      border-radius: 0.5rem;
      border: 1px solid #1f2937;
      padding: 0.45rem 0.6rem;
      color: #e5e7eb;
      font-size: 0.85rem;
      outline: none;
      transition: border-color 0.15s, box-shadow 0.15s, background 0.15s;
    }
    .field input:focus,
    .field select:focus,
    .field textarea:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
      background: #020617;
    }
    .switch-row {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-bottom: 0.75rem;
    }
    .switch {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.85rem;
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      background: #020617;
      border: 1px solid #1f2937;
      cursor: pointer;
      user-select: none;
    }
    .switch input {
      display: none;
    }
    .switch-pill {
      width: 30px;
      height: 16px;
      border-radius: 999px;
      background: #111827;
      border: 1px solid #374151;
      position: relative;
      transition: background 0.15s, border-color 0.15s;
    }
    .switch-pill::after {
      content: "";
      position: absolute;
      top: 1px;
      left: 1px;
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: #6b7280;
      transition: transform 0.15s, background 0.15s;
    }
    .switch input:checked + .switch-pill {
      background: #0369a1;
      border-color: #0ea5e9;
    }
    .switch input:checked + .switch-pill::after {
      transform: translateX(12px);
      background: #e5e7eb;
    }
    .btn-row {
      display: flex;
      gap: 0.75rem;
      margin-top: 0.75rem;
      flex-wrap: wrap;
    }
    .btn {
      border-radius: 999px;
      border: 1px solid #1f2937;
      padding: 0.45rem 0.9rem;
      font-size: 0.85rem;
      cursor: pointer;
      background: #0b1120;
      color: #e5e7eb;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      transition: background 0.15s, border-color 0.15s, transform 0.05s;
    }
    .btn-primary {
      background: linear-gradient(135deg, #0ea5e9, #22c55e);
      border-color: #22c55e;
      color: #020617;
      font-weight: 500;
    }
    .btn:hover {
      transform: translateY(-1px);
      border-color: #4b5563;
    }
    .btn-primary:hover {
      border-color: #bbf7d0;
    }
    .btn:active {
      transform: translateY(0);
    }
    textarea#output {
      width: 100%;
      min-height: 420px;
      resize: vertical;
      font-family: "JetBrains Mono", monospace;
      font-size: 0.8rem;
      line-height: 1.4;
      background: #020617;
      border-radius: 0.75rem;
      border: 1px solid #1f2937;
      padding: 0.75rem 0.9rem;
      color: #e5e7eb;
      box-sizing: border-box;
    }
  </style>
</head>
<body>
  <header>
    <h1>Kubernetes YAML Builder</h1>
    <p>Fill in the fields, toggle resources, and generate Deployment / Service / Ingress / Namespace YAML.</p>
  </header>

  <main>
    <!-- LEFT SIDE -->
    <section class="card">
      <h2>Inputs</h2>

      <div class="section-title">Resources</div>
      <div class="switch-row">
        <label class="switch">
          <input type="checkbox" id="enableNamespace" checked />
          <span class="switch-pill"></span>
          <span>Namespace</span>
        </label>
        <label class="switch">
          <input type="checkbox" id="enableDeployment" checked />
          <span class="switch-pill"></span>
          <span>Deployment</span>
        </label>
        <label class="switch">
          <input type="checkbox" id="enableService" checked />
          <span class="switch-pill"></span>
          <span>Service</span>
        </label>
        <label class="switch">
          <input type="checkbox" id="enableIngress" checked />
          <span class="switch-pill"></span>
          <span>Ingress</span>
        </label>
      </div>

      <div class="section-title">Core</div>
      <div class="grid-2">
        <div class="field">
          <label for="name">Name</label>
          <input id="name" type="text" value="my-app" />
        </div>
        <div class="field">
          <label for="namespace">Namespace</label>
          <input id="namespace" type="text" value="default" />
        </div>
      </div>

      <div class="section-title">Deployment</div>
      <div class="grid-2">
        <div class="field">
          <label for="image">Image</label>
          <input id="image" type="text" value="nginx:1.27" />
        </div>
        <div class="field">
          <label for="replicas">Replicas</label>
          <input id="replicas" type="number" value="1" />
        </div>
      </div>

      <div class="grid-2">
        <div class="field">
          <label for="containerPort">Container port</label>
          <input id="containerPort" type="number" value="80" />
        </div>
        <div class="field">
          <label for="env">Environment variables</label>
          <textarea id="env" rows="3"></textarea>
        </div>
      </div>

      <div class="section-title">Service</div>
      <div class="grid-3">
        <div class="field">
          <label for="serviceType">Type</label>
          <select id="serviceType">
            <option>ClusterIP</option>
            <option>NodePort</option>
            <option>LoadBalancer</option>
          </select>
        </div>
        <div class="field">
          <label for="servicePort">Port</label>
          <input id="servicePort" type="number" value="80" />
        </div>
        <div class="field">
          <label for="targetPort">Target port</label>
          <input id="targetPort" type="number" value="80" />
        </div>
      </div>

      <div class="section-title">Ingress</div>
      <div class="grid-2">
        <div class="field">
          <label for="ingressHost">Host</label>
          <input id="ingressHost" type="text" />
        </div>
        <div class="field">
          <label for="ingressPath">Path</label>
          <input id="ingressPath" type="text" value="/" />
        </div>
      </div>

      <div class="grid-2">
        <div class="field">
          <label for="ingressClassName">Ingress class</label>
          <input id="ingressClassName" type="text" placeholder="traefik" />
        </div>
        <div class="field">
          <label for="tlsSecretName">TLS secret</label>
          <input id="tlsSecretName" type="text" />
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-primary" id="generateBtn">‚öôÔ∏è Generate YAML</button>
        <button class="btn" id="copyBtn">üìã Copy</button>
        <button class="btn" id="clearBtn">üßπ Clear</button>
      </div>
    </section>

    <!-- RIGHT SIDE -->
    <section class="card">
      <h2>YAML Output</h2>
      <textarea id="output" spellcheck="false" placeholder="# Click Generate YAML"></textarea>
    </section>
  </main>

  <script>
    function indent(n) { return "  ".repeat(n); }

    function buildNamespace(ns) {
      return (
`apiVersion: v1
kind: Namespace
metadata:
  name: ${ns}
  labels:
    app: ${ns}
    app.kubernetes.io/name: ${ns}
    app.kubernetes.io/part-of: ${ns}`
      );
    }

    function buildDeployment(v) {
      return (
`apiVersion: apps/v1
kind: Deployment
metadata:
  name: ${v.name}
  namespace: ${v.namespace}
  labels:
    app: ${v.name}
spec:
  replicas: ${v.replicas}
  selector:
    matchLabels:
      app: ${v.name}
  template:
    metadata:
      labels:
        app: ${v.name}
    spec:
      containers:
      - name: ${v.name}
        image: ${v.image}
        ports:
        - containerPort: ${v.containerPort}`
      );
    }

    function buildService(v) {
      return (
`apiVersion: v1
kind: Service
metadata:
  name: ${v.name}
  namespace: ${v.namespace}
  labels:
    app: ${v.name}
spec:
  type: ${v.serviceType}
  selector:
    app: ${v.name}
  ports:
  - port: ${v.servicePort}
    targetPort: ${v.targetPort}`
      );
    }

    function buildIngress(v) {
      return (
`apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ${v.name}
  namespace: ${v.namespace}
spec:
  ingressClassName: ${v.ingressClassName || "traefik"}
  rules:
  - host: ${v.ingressHost}
    http:
      paths:
      - path: ${v.ingressPath}
        pathType: Prefix
        backend:
          service:
            name: ${v.name}
            port:
              number: ${v.servicePort}`
      );
    }

    document.getElementById("generateBtn").onclick = () => {
      const v = {
        enableNamespace: document.getElementById("enableNamespace").checked,
        enableDeployment: document.getElementById("enableDeployment").checked,
        enableService: document.getElementById("enableService").checked,
        enableIngress: document.getElementById("enableIngress").checked,
        name: document.getElementById("name").value,
        namespace: document.getElementById("namespace").value,
        image: document.getElementById("image").value,
        replicas: document.getElementById("replicas").value,
        containerPort: document.getElementById("containerPort").value,
        serviceType: document.getElementById("serviceType").value,
        servicePort: document.getElementById("servicePort").value,
        targetPort: document.getElementById("targetPort").value,
        ingressHost: document.getElementById("ingressHost").value,
        ingressPath: document.getElementById("ingressPath").value,
        ingressClassName: document.getElementById("ingressClassName").value,
        tlsSecretName: document.getElementById("tlsSecretName").value
      };

      const out = [];

      if (v.enableNamespace) out.push(buildNamespace(v.namespace));
      if (v.enableDeployment) out.push(buildDeployment(v));
      if (v.enableService) out.push(buildService(v));
      if (v.enableIngress) out.push(buildIngress(v));

      document.getElementById("output").value = out.join("\n---\n\n");
    };

    document.getElementById("copyBtn").onclick = async () => {
      const text = document.getElementById("output").value;
      if (!text.trim()) return;
      await navigator.clipboard.writeText(text);
      const btn = document.getElementById("copyBtn");
      const old = btn.innerText;
      btn.innerText = "Copied!";
      setTimeout(() => btn.innerText = old, 1200);
    };

    document.getElementById("clearBtn").onclick = () => {
      document.getElementById("output").value = "";
    };
  </script>
</body>
</html>
